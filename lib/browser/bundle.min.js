!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.OpenLR={})}(this,function(t){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e){return t(e={exports:{}},e.exports),e.exports}for(var o=function(t){return 3*t.length/4-l(t)},i=function(t){var e,r,n,o,i,a=t.length;o=l(t),i=new _(3*a/4-o),r=o>0?a-4:a;var u=0;for(e=0;e<r;e+=4)n=f[t.charCodeAt(e)]<<18|f[t.charCodeAt(e+1)]<<12|f[t.charCodeAt(e+2)]<<6|f[t.charCodeAt(e+3)],i[u++]=n>>16&255,i[u++]=n>>8&255,i[u++]=255&n;2===o?(n=f[t.charCodeAt(e)]<<2|f[t.charCodeAt(e+1)]>>4,i[u++]=255&n):1===o&&(n=f[t.charCodeAt(e)]<<10|f[t.charCodeAt(e+1)]<<4|f[t.charCodeAt(e+2)]>>2,i[u++]=n>>8&255,i[u++]=255&n);return i},a=function(t){for(var e,r=t.length,n=r%3,o="",i=[],a=0,f=r-n;a<f;a+=16383)i.push(I(t,a,a+16383>f?f:a+16383));1===n?(e=t[r-1],o+=u[e>>2],o+=u[e<<4&63],o+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],o+=u[e>>10],o+=u[e>>4&63],o+=u[e<<2&63],o+="=");return i.push(o),i.join("")},u=[],f=[],_="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,p=c.length;s<p;++s)u[s]=c[s],f[c.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function I(t,e,r){for(var n,o,i=[],a=e;a<r;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],i.push(u[(o=n)>>18&63]+u[o>>12&63]+u[o>>6&63]+u[63&o]);return i.join("")}f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63;var h={byteLength:o,toByteArray:i,fromByteArray:a},d={read:function(t,e,r,n,o){var i,a,u=8*o-n-1,f=(1<<u)-1,_=f>>1,c=-7,s=r?o-1:0,p=r?-1:1,l=t[e+s];for(s+=p,i=l&(1<<-c)-1,l>>=-c,c+=u;c>0;i=256*i+t[e+s],s+=p,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+t[e+s],s+=p,c-=8);if(0===i)i=1-_;else{if(i===f)return a?NaN:1/0*(l?-1:1);a+=Math.pow(2,n),i-=_}return(l?-1:1)*a*Math.pow(2,i-n)},write:function(t,e,r,n,o,i){var a,u,f,_=8*i-o-1,c=(1<<_)-1,s=c>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:i-1,I=n?1:-1,h=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-a))<1&&(a--,f*=2),(e+=a+s>=1?p/f:p*Math.pow(2,1-s))*f>=2&&(a++,f/=2),a+s>=c?(u=0,a=c):a+s>=1?(u=(e*f-1)*Math.pow(2,o),a+=s):(u=e*Math.pow(2,s-1)*Math.pow(2,o),a=0));o>=8;t[r+l]=255&u,l+=I,u/=256,o-=8);for(a=a<<o|u,_+=o;_>0;t[r+l]=255&a,l+=I,a/=256,_-=8);t[r+l-I]|=128*h}},R=n(function(t,e){e.Buffer=o,e.SlowBuffer=function(t){+t!=t&&(t=0);return o.alloc(+t)},e.INSPECT_MAX_BYTES=50;var r=2147483647;function n(t){if(t>r)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=o.prototype,e}function o(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(t)}return i(t,e,r)}function i(t,e,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return F(t)?function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(r||0))throw new RangeError("'length' is out of bounds");var n;n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r);return n.__proto__=o.prototype,n}(t,e,r):"string"==typeof t?function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!o.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var r=0|c(t,e),i=n(r),a=i.write(t,e);a!==r&&(i=i.slice(0,a));return i}(t,e):function(t){if(o.isBuffer(t)){var e=0|_(t.length),r=n(e);return 0===r.length?r:(t.copy(r,0,0,e),r)}if(t){if(M(t)||"length"in t)return"number"!=typeof t.length||G(t.length)?n(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t){return a(t),n(t<0?0:0|_(t))}function f(t){for(var e=t.length<0?0:0|_(t.length),r=n(e),o=0;o<e;o+=1)r[o]=255&t[o];return r}function _(t){if(t>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|t}function c(t,e){if(o.isBuffer(t))return t.length;if(M(t)||F(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return D(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return w(t).length;default:if(n)return D(t).length;e=(""+e).toLowerCase(),n=!0}}function s(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function p(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),G(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:l(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):l(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function l(t,e,r,n,o){var i,a=1,u=t.length,f=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,u/=2,f/=2,r/=2}function _(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var c=-1;for(i=r;i<u;i++)if(_(t,i)===_(e,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===f)return c*a}else-1!==c&&(i-=i-c),c=-1}else for(r+f>u&&(r=u-f),i=r;i>=0;i--){for(var s=!0,p=0;p<f;p++)if(_(t,i+p)!==_(e,p)){s=!1;break}if(s)return i}return-1}function I(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var u=parseInt(e.substr(2*a,2),16);if(G(u))return a;t[r+a]=u}return a}function R(t,e,r,n){return P(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function E(t,e,r){return 0===e&&r===t.length?h.fromByteArray(t):h.fromByteArray(t.slice(e,r))}function O(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,a,u,f,_=t[o],c=null,s=_>239?4:_>223?3:_>191?2:1;if(o+s<=r)switch(s){case 1:_<128&&(c=_);break;case 2:128==(192&(i=t[o+1]))&&(f=(31&_)<<6|63&i)>127&&(c=f);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(f=(15&_)<<12|(63&i)<<6|63&a)>2047&&(f<55296||f>57343)&&(c=f);break;case 4:i=t[o+1],a=t[o+2],u=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&u)&&(f=(15&_)<<18|(63&i)<<12|(63&a)<<6|63&u)>65535&&f<1114112&&(c=f)}null===c?(c=65533,s=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),o+=s}return function(t){var e=t.length;if(e<=y)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=y));return r}(n)}e.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(t,e,r){return i(t,e,r)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(t,e,r){return i=e,u=r,a(o=t),o<=0?n(o):void 0!==i?"string"==typeof u?n(o).fill(i,u):n(o).fill(i):n(o);var o,i,u},o.allocUnsafe=function(t){return u(t)},o.allocUnsafeSlow=function(t){return u(t)},o.isBuffer=function(t){return null!=t&&!0===t._isBuffer},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},o.byteLength=c,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)s(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)s(this,e,e+3),s(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)s(this,e,e+7),s(this,e+1,e+6),s(this,e+2,e+5),s(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?O(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,r);case"utf8":case"utf-8":return O(this,e,r);case"ascii":return g(this,e,r);case"latin1":case"binary":return A(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,r,n,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var a=i-n,u=r-e,f=Math.min(a,u),_=this.slice(n,i),c=t.slice(e,r),s=0;s<f;++s)if(_[s]!==c[s]){a=_[s],u=c[s];break}return a<u?-1:u<a?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return p(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return p(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i,a,u,f,_,c,s,p,l,h=!1;;)switch(n){case"hex":return I(this,t,e,r);case"utf8":case"utf-8":return p=e,l=r,P(D(t,(s=this).length-p),s,p,l);case"ascii":return R(this,t,e,r);case"latin1":case"binary":return R(this,t,e,r);case"base64":return f=this,_=e,c=r,P(w(t),f,_,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=e,u=r,P(function(t,e){for(var r,n,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,(i=this).length-a),i,a,u);default:if(h)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),h=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var y=4096;function g(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function A(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function L(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=m(t[i]);return o}function S(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function T(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,r,n,i,a){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function v(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(t,e,r,n,o){return e=+e,r>>>=0,o||v(t,0,r,4),d.write(t,e,r,n,23,4),r+4}function C(t,e,r,n,o){return e=+e,r>>>=0,o||v(t,0,r,8),d.write(t,e,r,n,52,8),r+8}o.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=o.prototype,n},o.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},o.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},o.prototype.readUInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||T(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||T(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},o.prototype.readInt8=function(t,e){return t>>>=0,e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||T(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){t>>>=0,e||T(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||T(t,4,this.length),d.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||T(t,4,this.length),d.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||T(t,8,this.length),d.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||T(t,8,this.length),d.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||B(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||B(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var o=Math.pow(2,8*r-1);B(this,t,e,r,o-1,-o)}var i=0,a=1,u=0;for(this[e]=255&t;++i<r&&(a*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/a>>0)-u&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var o=Math.pow(2,8*r-1);B(this,t,e,r,o-1,-o)}var i=r-1,a=1,u=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/a>>0)-u&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,r){return N(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return N(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return C(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return C(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var a;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var u=o.isBuffer(t)?t:new o(t,n),f=u.length;for(a=0;a<r-e;++a)this[a+e]=u[a%f]}return this};var b=/[^+/0-9A-Za-z-_]/g;function m(t){return t<16?"0"+t.toString(16):t.toString(16)}function D(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function w(t){return h.toByteArray(function(t){if((t=t.trim().replace(b,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function P(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function F(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function M(t){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(t)}function G(t){return t!=t}}),E=(R.Buffer,R.SlowBuffer,R.INSPECT_MAX_BYTES,R.kMaxLength,n(function(t,e){var r,n;Object.defineProperty(e,"__esModule",{value:!0}),(n=r=e.LocationType||(e.LocationType={}))[n.UNKNOWN=0]="UNKNOWN",n[n.LINE_LOCATION=1]="LINE_LOCATION",n[n.GEO_COORDINATES=2]="GEO_COORDINATES",n[n.POINT_ALONG_LINE=3]="POINT_ALONG_LINE",n[n.POI_WITH_ACCESS_POINT=4]="POI_WITH_ACCESS_POINT",n[n.CIRCLE=5]="CIRCLE",n[n.POLYGON=6]="POLYGON",n[n.CLOSED_LINE=7]="CLOSED_LINE",n[n.RECTANGLE=8]="RECTANGLE",n[n.GRID=9]="GRID",e.AREA_LOCATIONS=new Set([r.CIRCLE,r.POLYGON,r.CLOSED_LINE,r.RECTANGLE,r.GRID]),e.POINTS_LOCATIONS=new Set([r.GEO_COORDINATES,r.POINT_ALONG_LINE,r.POI_WITH_ACCESS_POINT])}));r(E);E.LocationType,E.AREA_LOCATIONS,E.POINTS_LOCATIONS;var O=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.IDENTIFIER="binary",e.ROUND_FACTOR=.5,e.BITS_PER_BYTE=8,e.DECA_MICRO_DEG_FACTOR=1e5,e.BIT24FACTOR=46603.377778,e.BIT24FACTOR_REVERSED=1/e.BIT24FACTOR,e.BEARING_SECTOR=11.25,e.LENGTH_INTERVAL=58.6,e.IS_POINT=1,e.IS_NOT_POINT=0,e.AREA_CODE_CIRCLE=0,e.AREA_CODE_RECTANGLE=2,e.AREA_CODE_GRID=2,e.AREA_CODE_POLYGON=1,e.AREA_CODE_CLOSEDLINE=3,e.IS_NOT_AREA=0,e.HAS_ATTRIBUTES=1,e.HAS_NO_ATTRIBUTES=0,e.HEADER_SIZE=1,e.FIRST_LRP_SIZE=9,e.LRP_SIZE=7,e.LAST_LRP_SIZE=6,e.ABS_COORD_SIZE=6,e.RELATIVE_OFFSET_LENGTH=.390625,e.MIN_BYTES_LINE_LOCATION=e.HEADER_SIZE+e.FIRST_LRP_SIZE+e.LAST_LRP_SIZE,e.MIN_BYTES_CLOSED_LINE_LOCATION=e.HEADER_SIZE+e.FIRST_LRP_SIZE+2,e.GEOCOORD_SIZE=e.HEADER_SIZE+e.ABS_COORD_SIZE,e.MIN_BYTES_POINT_LOCATION=e.GEOCOORD_SIZE,e.BINARY_VERSION_2=2,e.BINARY_VERSION_3=3,e.LATEST_BINARY_VERSION=e.BINARY_VERSION_3,e.HAS_OFFSET=1,e.OFFSET_BUCKETS=256,e.POINT_ALONG_LINE_SIZE=e.HEADER_SIZE+e.FIRST_LRP_SIZE+e.LAST_LRP_SIZE,e.RELATIVE_COORD_SIZE=4,e.SMALL_RADIUS_BITS=8,e.MEDIUM_RADIUS_BITS=16,e.LARGE_RADIUS_BITS=24,e.EXTRA_LARGE_RADIUS_BITS=32,e.DIMENSION_SIZE=2,e.RECTANGLE_SIZE=e.HEADER_SIZE+e.ABS_COORD_SIZE+e.RELATIVE_COORD_SIZE,e.LARGE_RECTANGLE_SIZE=e.HEADER_SIZE+e.ABS_COORD_SIZE+e.ABS_COORD_SIZE,e.GRID_SIZE=e.RECTANGLE_SIZE+2*e.DIMENSION_SIZE,e.LARGE_GRID_SIZE=e.LARGE_RECTANGLE_SIZE+2*e.DIMENSION_SIZE,e.MIN_BYTES_POLYGON=e.HEADER_SIZE+e.ABS_COORD_SIZE+2*e.RELATIVE_COORD_SIZE,e.POINT_OFFSET_SIZE=1,e.POINT_WITH_ACCESS_SIZE=e.HEADER_SIZE+e.FIRST_LRP_SIZE+e.LAST_LRP_SIZE+e.RELATIVE_COORD_SIZE,e.POINT_LOCATION_VERSION=3,e.POINT_LOCATION_TYPES=new Set([E.LocationType.GEO_COORDINATES,E.LocationType.POI_WITH_ACCESS_POINT,E.LocationType.POINT_ALONG_LINE]),e.AREA_LOCATION_VERSION=3,e.AREA_LOCATION_TYPES=new Set([E.LocationType.CIRCLE,E.LocationType.GRID,E.LocationType.CLOSED_LINE,E.LocationType.RECTANGLE,E.LocationType.POLYGON])});r(O);O.IDENTIFIER,O.ROUND_FACTOR,O.BITS_PER_BYTE,O.DECA_MICRO_DEG_FACTOR,O.BIT24FACTOR,O.BIT24FACTOR_REVERSED,O.BEARING_SECTOR,O.LENGTH_INTERVAL,O.IS_POINT,O.IS_NOT_POINT,O.AREA_CODE_CIRCLE,O.AREA_CODE_RECTANGLE,O.AREA_CODE_GRID,O.AREA_CODE_POLYGON,O.AREA_CODE_CLOSEDLINE,O.IS_NOT_AREA,O.HAS_ATTRIBUTES,O.HAS_NO_ATTRIBUTES,O.HEADER_SIZE,O.FIRST_LRP_SIZE,O.LRP_SIZE,O.LAST_LRP_SIZE,O.ABS_COORD_SIZE,O.RELATIVE_OFFSET_LENGTH,O.MIN_BYTES_LINE_LOCATION,O.MIN_BYTES_CLOSED_LINE_LOCATION,O.GEOCOORD_SIZE,O.MIN_BYTES_POINT_LOCATION,O.BINARY_VERSION_2,O.BINARY_VERSION_3,O.LATEST_BINARY_VERSION,O.HAS_OFFSET,O.OFFSET_BUCKETS,O.POINT_ALONG_LINE_SIZE,O.RELATIVE_COORD_SIZE,O.SMALL_RADIUS_BITS,O.MEDIUM_RADIUS_BITS,O.LARGE_RADIUS_BITS,O.EXTRA_LARGE_RADIUS_BITS,O.DIMENSION_SIZE,O.RECTANGLE_SIZE,O.LARGE_RECTANGLE_SIZE,O.GRID_SIZE,O.LARGE_GRID_SIZE,O.MIN_BYTES_POLYGON,O.POINT_OFFSET_SIZE,O.POINT_WITH_ACCESS_SIZE,O.POINT_LOCATION_VERSION,O.POINT_LOCATION_TYPES,O.AREA_LOCATION_VERSION,O.AREA_LOCATION_TYPES;var y=n(function(t,e){var r;Object.defineProperty(e,"__esModule",{value:!0}),(r=e.BinaryReturnCode||(e.BinaryReturnCode={}))[r.INVALID_VERSION=0]="INVALID_VERSION",r[r.INVALID_OFFSET=1]="INVALID_OFFSET",r[r.UNKNOWN_LOCATION_TYPE=2]="UNKNOWN_LOCATION_TYPE",r[r.MISSING_DATA=3]="MISSING_DATA",r[r.NOT_ENOUGH_BYTES=4]="NOT_ENOUGH_BYTES",r[r.READING_HEADER_FAILURE=5]="READING_HEADER_FAILURE",r[r.INVALID_BYTE_SIZE=6]="INVALID_BYTE_SIZE",r[r.INVALID_HEADER=7]="INVALID_HEADER",r[r.INVALID_RADIUS=8]="INVALID_RADIUS",r[r.INVALID_BINARY_DATA=9]="INVALID_BINARY_DATA",e.getId=function(t){return t}});r(y);y.BinaryReturnCode,y.getId;var g=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this._totalBufferLengthBytes=t._DEFAULT_BUFFER_LENGTH}return t.prototype._expandBuffer=function(t){var e=t||2*this._totalBufferLengthBytes;if(e>this._totalBufferLengthBytes){this._totalBufferLengthBytes=e;var r=R.Buffer.alloc(e);this._buffer.copy(r),this._buffer=r}},t.prototype._createBuffer=function(t){this._totalBufferLengthBytes=t,this._buffer=R.Buffer.alloc(t)},t.prototype._getData=function(){var e=this._currentBit>>>t._BIT_BYTE_SHIFT,r=R.Buffer.alloc(e);return this._buffer.copy(r,0,0,e),r},t._BIT_BYTE_SHIFT=3,t._BYTE_SIZE=8,t._HIGHEST_BIT=t._BYTE_SIZE-1,t._BITMASK=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215,33554431,67108863,134217727,268435455,536870911,1073741823,2147483647,4294967295],t._COMPLEMENT_MASK=[4294967295,4294967294,4294967292,4294967288,4294967280,4294967264,4294967232,4294967168,4294967040,4294966784,4294966272,4294965248,4294963200,4294959104,4294950912,4294934528,4294901760,4294836224,4294705152,4294443008,4293918720,4292870144,4290772992,4286578688,4278190080,4261412864,4227858432,4160749568,4026531840,3758096384,3221225472,2147483648,0],t._SIGNED_MASK=[0,1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,4194304,8388608,16777216,33554432,67108864,134217728,268435456,536870912,1073741824,2147483648],t._DEFAULT_BUFFER_LENGTH=1024,t._MAX_BIT_SIZE=32,t}();e.BitStreamAbstract=r});r(g);g.BitStreamAbstract;var A=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getBits=function(t){var e=this._getNextBits(t);return this._currentBit+=t,e},e.prototype.getSignedBits=function(t){var e=this._getNextSignedBits(t);return this._currentBit+=t,e},e.prototype._getNextBits=function(t){if(0===t)return 0;if(t>g.BitStreamAbstract._MAX_BIT_SIZE||t<1)throw new Error("Invalid bit size");if(this._currentBit+t>this._bufferFilledBytes<<g.BitStreamAbstract._BIT_BYTE_SHIFT&&this._fillBufferFromInput(),(this._totalBufferLengthBytes<<g.BitStreamAbstract._BIT_BYTE_SHIFT)-this._currentBit<t)throw new Error("Not enough data");var e=0,r=this._currentBit>>>g.BitStreamAbstract._BIT_BYTE_SHIFT,n=this._currentBit+t-1>>>g.BitStreamAbstract._BIT_BYTE_SHIFT,o=g.BitStreamAbstract._BYTE_SIZE-this._currentBit%g.BitStreamAbstract._BYTE_SIZE;if(o>=t)e=this._buffer[r]>>o-t&g.BitStreamAbstract._BITMASK[t];else{var i=(this._currentBit+t)%g.BitStreamAbstract._BYTE_SIZE;for(e|=this._buffer[r]&g.BitStreamAbstract._BITMASK[o],r++;r<n;r++)e<<=g.BitStreamAbstract._BYTE_SIZE,e|=this._buffer[r]&g.BitStreamAbstract._BITMASK[g.BitStreamAbstract._BYTE_SIZE];i>0?(e<<=i,e|=this._buffer[r]>>g.BitStreamAbstract._BYTE_SIZE-i&g.BitStreamAbstract._BITMASK[i]):(e<<=g.BitStreamAbstract._BYTE_SIZE,e|=this._buffer[r]&g.BitStreamAbstract._BITMASK[g.BitStreamAbstract._BYTE_SIZE])}return e},e.prototype._getNextSignedBits=function(t){var e=this._getNextBits(t);return t>1&&0!=(g.BitStreamAbstract._SIGNED_MASK[t]&e)?e|g.BitStreamAbstract._COMPLEMENT_MASK[t]:e},e.prototype._fillBufferFromInput=function(){var t=this._currentBit>>>g.BitStreamAbstract._BIT_BYTE_SHIFT,e=this._bufferFilledBytes-t;this._buffer.copy(this._buffer,0,t,this._bufferFilledBytes);var r=this._totalBufferLengthBytes-t,n=this._inBuffer.copy(this._buffer,e,0,r);if(n<r)throw new Error("End of Data");this._bufferFilledBytes=e+n,this._currentBit&=g.BitStreamAbstract._HIGHEST_BIT},e.fromString=function(t,r){var n=new e;return n._inBuffer=Buffer.from(t,r),n._createBuffer(n._inBuffer.length),n._currentBit=0,n._bufferFilledBytes=0,n._fillBufferFromInput(),n},e.fromStringAndLength=function(t,r,n){var o=new e;return o._inBuffer=Buffer.from(t,r),o._createBuffer(n),o._currentBit=0,o._bufferFilledBytes=0,o._fillBufferFromInput(),o},e.fromBuffer=function(t){var r=new e;return r._inBuffer=t,r._createBuffer(t.length),r._currentBit=0,r._bufferFilledBytes=0,r._fillBufferFromInput(),r},e.fromBufferAndLength=function(t,r){var n=new e;return n._inBuffer=t,n._createBuffer(r),n._currentBit=0,n._bufferFilledBytes=0,n._fillBufferFromInput(),n},e}(g.BitStreamAbstract);r.BitStreamInput=i});r(A);A.BitStreamInput;var L=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.getId=function(){return this._id},t.prototype.hasId=function(){return null!==this._id},t.prototype.getLocationType=function(){return this._locationType},t.prototype.getReturnCode=function(){return this._returnCode},t.prototype.isValid=function(){return null===this._returnCode},t.prototype.getLocationReferencePoints=function(){return null},t.prototype.getOffsets=function(){return null},t.prototype.getGeoCoordinates=function(){return null},t.prototype.getSideOfRoad=function(){return null},t.prototype.getOrientation=function(){return null},t.prototype.getCornerPoints=function(){return null},t.prototype.getLowerLeftPoint=function(){return null},t.prototype.getUpperRightPoint=function(){return null},t.prototype.getCenterPoint=function(){return null},t.prototype.getRadius=function(){return-1},t.prototype.getNumberOfColumns=function(){return-1},t.prototype.getNumberOfRows=function(){return-1},t}();e.RawLocationReference=r});r(L);L.RawLocationReference;var S=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.fromIdAndStatusCode=function(t,r){var n=new e;return n._id=t,n._locationType=E.LocationType.UNKNOWN,n._returnCode=r,n},e.fromInvalidValues=function(t,r,n){var o=new e;return o._id=t,o._locationType=n,o._returnCode=r,o},e}(L.RawLocationReference);r.RawInvalidLocationReference=i});r(S);S.RawInvalidLocationReference;var T=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t._RFU_VALUE=0,t}();e.BinaryInformation=r});r(T);T.BinaryInformation;var B=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.put=function(t){t.putBits(T.BinaryInformation._RFU_VALUE,e._RFU_BITS);var r=this._arf/2,n=this._arf%2;t.putBits(r,e._AREA_FLAG_BIT1),t.putBits(this._pf,e._POINT_FLAG_BITS),t.putBits(n,e._AREA_FLAG_BIT0),t.putBits(this._af,e._ATTR_FLAG_BITS),t.putBits(this._ver,e._VERSION_BITS)},e.fromValues=function(t,r,n,o){var i=new e;return i._arf=t,i._af=r,i._pf=n,i._ver=o,i},e.fromBitStreamInput=function(t){if(t.getBits(e._RFU_BITS)!==T.BinaryInformation._RFU_VALUE)throw new Error("Const value mismatch");var r=new e,n=t.getBits(e._AREA_FLAG_BIT0);r._pf=t.getBits(e._POINT_FLAG_BITS);var o=t.getBits(e._AREA_FLAG_BIT1);return r._arf=2*n+o,r._af=t.getBits(e._ATTR_FLAG_BITS),r._ver=t.getBits(e._VERSION_BITS),r},Object.defineProperty(e.prototype,"arf",{get:function(){return this._arf},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"af",{get:function(){return this._af},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pf",{get:function(){return this._pf},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ver",{get:function(){return this._ver},enumerable:!0,configurable:!0}),e._RFU_BITS=1,e._AREA_FLAG_BIT0=1,e._AREA_FLAG_BIT1=1,e._ATTR_FLAG_BITS=1,e._POINT_FLAG_BITS=1,e._VERSION_BITS=3,e}(T.BinaryInformation);r.Header=i});r(B);B.Header;var v=n(function(t,e){var r,n;Object.defineProperty(e,"__esModule",{value:!0}),(n=r=e.SideOfRoad||(e.SideOfRoad={}))[n.ON_ROAD_OR_UNKNOWN=0]="ON_ROAD_OR_UNKNOWN",n[n.RIGHT=1]="RIGHT",n[n.LEFT=2]="LEFT",n[n.BOTH=3]="BOTH",e.getSideOfRoadValues=function(){return[r.ON_ROAD_OR_UNKNOWN,r.RIGHT,r.LEFT,r.BOTH]},e.getDefault=function(){return r.ON_ROAD_OR_UNKNOWN},e.getId=function(t){return t}});r(v);v.SideOfRoad,v.getSideOfRoadValues,v.getDefault,v.getId;var N=n(function(t,e){var r,n;Object.defineProperty(e,"__esModule",{value:!0}),(n=r=e.Orientation||(e.Orientation={}))[n.NO_ORIENTATION_OR_UNKNOWN=0]="NO_ORIENTATION_OR_UNKNOWN",n[n.WITH_LINE_DIRECTION=1]="WITH_LINE_DIRECTION",n[n.AGAINST_LINE_DIRECTION=2]="AGAINST_LINE_DIRECTION",n[n.BOTH=3]="BOTH",e.getOrientationValues=function(){return[r.NO_ORIENTATION_OR_UNKNOWN,r.WITH_LINE_DIRECTION,r.AGAINST_LINE_DIRECTION,r.BOTH]},e.getDefault=function(){return r.NO_ORIENTATION_OR_UNKNOWN},e.getId=function(t){return t}});r(N);N.Orientation,N.getOrientationValues,N.getDefault,N.getId;var C=n(function(t,e){var r,n;Object.defineProperty(e,"__esModule",{value:!0}),(n=r=e.FunctionalRoadClass||(e.FunctionalRoadClass={}))[n.FRC_0=0]="FRC_0",n[n.FRC_1=1]="FRC_1",n[n.FRC_2=2]="FRC_2",n[n.FRC_3=3]="FRC_3",n[n.FRC_4=4]="FRC_4",n[n.FRC_5=5]="FRC_5",n[n.FRC_6=6]="FRC_6",n[n.FRC_7=7]="FRC_7",e.getFRCValues=function(){return[r.FRC_0,r.FRC_1,r.FRC_2,r.FRC_3,r.FRC_4,r.FRC_5,r.FRC_6,r.FRC_7]},e.getId=function(t){return t},e.lower=function(t){return Math.min(t+1,r.FRC_7)},e.higher=function(t){return Math.max(t-1,r.FRC_0)},e.getHighestFrc=r.FRC_0,e.getLowestFrc=r.FRC_7});r(C);C.FunctionalRoadClass,C.getFRCValues,C.getId,C.lower,C.higher,C.getHighestFrc,C.getLowestFrc;var b=n(function(t,e){var r,n;Object.defineProperty(e,"__esModule",{value:!0}),(n=r=e.FormOfWay||(e.FormOfWay={}))[n.UNDEFINED=0]="UNDEFINED",n[n.MOTORWAY=1]="MOTORWAY",n[n.MULTIPLE_CARRIAGEWAY=2]="MULTIPLE_CARRIAGEWAY",n[n.SINGLE_CARRIAGEWAY=3]="SINGLE_CARRIAGEWAY",n[n.ROUNDABOUT=4]="ROUNDABOUT",n[n.TRAFFIC_SQUARE=5]="TRAFFIC_SQUARE",n[n.SLIPROAD=6]="SLIPROAD",n[n.OTHER=7]="OTHER",e.getFormOfWayValues=function(){return[r.UNDEFINED,r.MOTORWAY,r.MULTIPLE_CARRIAGEWAY,r.SINGLE_CARRIAGEWAY,r.ROUNDABOUT,r.TRAFFIC_SQUARE,r.SLIPROAD]},e.getId=function(t){return t}});r(b);b.FormOfWay,b.getFormOfWayValues,b.getId;var m=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.getLongitudeDeg=function(){return this._longitude},t.prototype.getLatitudeDeg=function(){return this._latitude},t.prototype.getBearing=function(){return this._bearing},t.prototype.getDistanceToNext=function(){return this._distanceToNext},t.prototype.getFRC=function(){return this._frc},t.prototype.getFOW=function(){return this._fow},t.prototype.getLfrc=function(){return this._lfrcnp},t.prototype.isLastLRP=function(){return this._isLast},t.fromValues=function(e,r,n,o,i,a,u,f,_){var c=new t;return c._bearing=a,c._distanceToNext=u,c._frc=r,c._fow=n,c._lfrcnp=f,c._isLast=_,c._longitude=o,c._latitude=i,c._sequenceNumber=e,c},t.fromGeoCoordinate=function(e){var r=new t;return r._longitude=e.getLongitudeDeg(),r._latitude=e.getLatitudeDeg(),r._frc=null,r._fow=null,r._bearing=0,r._lfrcnp=null,r._isLast=!1,r._distanceToNext=0,r._sequenceNumber=1,r},t}();e.LocationReferencePoint=r});r(m);m.LocationReferencePoint;var D=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.decodeData=function(t,e,r,n,o){throw new Error("This method is abstract")},t.prototype._resolveSideOfRoad=function(t){var e=t.sideOrOrientation;return v.getSideOfRoadValues()[e]},t.prototype._resolveOrientation=function(t){var e=t.sideOrOrientation;return N.getOrientationValues()[e]},t.prototype._calculateRelativeDistance=function(t){return(t*O.RELATIVE_OFFSET_LENGTH+(t+1)*O.RELATIVE_OFFSET_LENGTH)/2},t.prototype._createFirstLRP=function(t,e){var r=C.getFRCValues()[e.attrib1.frc],n=b.getFormOfWayValues()[e.attrib1.fow],o=this._calculate32BitRepresentation(e.lon),i=this._calculate32BitRepresentation(e.lat),a=this._calculateBearingEstimate(e.attrib2.bear),u=this._calculateDistanceEstimate(e.attrib3.dnp),f=C.getFRCValues()[e.attrib2.lfrcnp];return m.LocationReferencePoint.fromValues(t,r,n,o,i,a,u,f,!1)},t.prototype._createIntermediateLRPFromLatitudeLongitude=function(t,e,r,n){var o=C.getFRCValues()[e.attrib1.frc],i=b.getFormOfWayValues()[e.attrib1.fow],a=r+e.lon/O.DECA_MICRO_DEG_FACTOR,u=n+e.lat/O.DECA_MICRO_DEG_FACTOR,f=this._calculateBearingEstimate(e.attrib2.bear),_=this._calculateDistanceEstimate(e.attrib3.dnp),c=C.getFRCValues()[e.attrib2.lfrcnp];return m.LocationReferencePoint.fromValues(t,o,i,a,u,f,_,c,!1)},t.prototype._createIntermediateLRPFromFirstAndLast=function(t,e,r){var n=C.getFRCValues()[e.attrib5.frc],o=b.getFormOfWayValues()[e.attrib5.fow],i=this._calculateBearingEstimate(e.attrib6.bear),a=this._calculate32BitRepresentation(r.lon),u=this._calculate32BitRepresentation(r.lat);return m.LocationReferencePoint.fromValues(t,n,o,a,u,i,0,null,!0)},t.prototype._createLastLRP=function(t,e,r,n){var o=C.getFRCValues()[e.attrib1.frc],i=b.getFormOfWayValues()[e.attrib1.fow],a=r+e.lon/O.DECA_MICRO_DEG_FACTOR,u=n+e.lat/O.DECA_MICRO_DEG_FACTOR,f=this._calculateBearingEstimate(e.attrib4.bear),_=C.FunctionalRoadClass.FRC_7;return m.LocationReferencePoint.fromValues(t,o,i,a,u,f,0,_,!0)},t.prototype._calculate32BitRepresentation=function(t){return(t-Math.sign(t)*O.ROUND_FACTOR)*O.BIT24FACTOR_REVERSED},t.prototype._calculateBearingEstimate=function(t){var e=t*O.BEARING_SECTOR;return((t+1)*O.BEARING_SECTOR+e)/2},t.prototype._calculateDistanceEstimate=function(t){var e=t*O.LENGTH_INTERVAL,r=(t+1)*O.LENGTH_INTERVAL;return Math.round((r+e)/2)},t.prototype._get24BitRepresentation=function(t){var e=Math.sign(t);return Math.round(Math.fround(e*O.ROUND_FACTOR+t*O.BIT24FACTOR))},t}();e.AbstractDecoder=r});r(D);D.AbstractDecoder;var w=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.putCoordinates=function(t){t.putBits(this._lon,this._coordBits),t.putBits(this._lat,this._coordBits)},e.prototype._read=function(t){this._lon=t.getSignedBits(this._coordBits),this._lat=t.getSignedBits(this._coordBits)},e.fromBitCount=function(t){var r=new e;return r._coordBits=t,r},Object.defineProperty(e.prototype,"lon",{get:function(){return this._lon},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lat",{get:function(){return this._lat},enumerable:!0,configurable:!0}),e}(T.BinaryInformation);r.AbstractCoordinate=i});r(w);w.AbstractCoordinate;var P=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.fromBitCount=function(t){var r=new e;return r._coordBits=t,r},Object.defineProperty(e.prototype,"attrib1",{get:function(){return this._attrib1},enumerable:!0,configurable:!0}),e}(w.AbstractCoordinate);r.AbstractLRP=i});r(P);P.AbstractLRP;var F=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.put=function(t){t.putBits(this._sideOrOrientation,e._SIDE_OR_ORIENTATION_BITS),t.putBits(this._frc,e._FRC_BITS),t.putBits(this._fow,e._FOW_BITS)},e.fromValues=function(t,r,n){var o=new e;return o._frc=t,o._fow=r,o._sideOrOrientation=n,o},e.fromBitStreamInput=function(t){var r=new e;return r._sideOrOrientation=t.getBits(e._SIDE_OR_ORIENTATION_BITS),r._frc=t.getBits(e._FRC_BITS),r._fow=t.getBits(e._FOW_BITS),r},Object.defineProperty(e.prototype,"frc",{get:function(){return this._frc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fow",{get:function(){return this._fow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sideOrOrientation",{get:function(){return this._sideOrOrientation},enumerable:!0,configurable:!0}),e._SIDE_OR_ORIENTATION_BITS=2,e._FRC_BITS=3,e._FOW_BITS=3,e}(T.BinaryInformation);r.Attr1=i});r(F);F.Attr1;var M=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.put=function(t){t.putBits(this._lfrcnp,e._LFRCNP_BITS),t.putBits(this._bear,e._BEAR_BITS)},e.fromValues=function(t,r){var n=new e;return n._lfrcnp=t,n._bear=r,n},e.fromBitStreamInput=function(t){var r=new e;return r._lfrcnp=t.getBits(e._LFRCNP_BITS),r._bear=t.getBits(e._BEAR_BITS),r},Object.defineProperty(e.prototype,"lfrcnp",{get:function(){return this._lfrcnp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bear",{get:function(){return this._bear},enumerable:!0,configurable:!0}),e._LFRCNP_BITS=3,e._BEAR_BITS=5,e}(T.BinaryInformation);r.Attr2=i});r(M);M.Attr2;var G=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.put=function(t){t.putBits(this._dnp,e._DNP_BITS)},e.fromValues=function(t){var r=new e;return r._dnp=t,r},e.fromBitStreamInput=function(t){var r=new e;return r._dnp=t.getBits(e._DNP_BITS),r},Object.defineProperty(e.prototype,"dnp",{get:function(){return this._dnp},enumerable:!0,configurable:!0}),e._DNP_BITS=8,e}(T.BinaryInformation);r.Attr3=i});r(G);G.Attr3;var V=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.put=function(t){this.putCoordinates(t),this._attrib1.put(t),this._attrib2.put(t),this._attrib3.put(t)},e.fromValues=function(t,r,n,o,i){var a=new e;return a._coordBits=e._COORD_BITS,a._lon=t,a._lat=r,a._attrib1=n,a._attrib2=o,a._attrib3=i,a},e.fromBitStreamInput=function(t){var r=new e;return r._coordBits=e._COORD_BITS,r._read(t),r._attrib1=F.Attr1.fromBitStreamInput(t),r._attrib2=M.Attr2.fromBitStreamInput(t),r._attrib3=G.Attr3.fromBitStreamInput(t),r},Object.defineProperty(e.prototype,"attrib2",{get:function(){return this._attrib2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attrib3",{get:function(){return this._attrib3},enumerable:!0,configurable:!0}),e._COORD_BITS=24,e}(P.AbstractLRP);r.FirstLRP=i});r(V);V.FirstLRP;var U=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.put=function(t){this.putCoordinates(t),this._attrib1.put(t),this._attrib2.put(t),this._attrib3.put(t)},e.fromValues=function(t,r,n,o,i){var a=new e;return a._coordBits=e._COORD_BITS,a._lon=t,a._lat=r,a._attrib1=n,a._attrib2=o,a._attrib3=i,a},e.fromBitStreamInput=function(t){var r=new e;return r._coordBits=e._COORD_BITS,r._read(t),r._attrib1=F.Attr1.fromBitStreamInput(t),r._attrib2=M.Attr2.fromBitStreamInput(t),r._attrib3=G.Attr3.fromBitStreamInput(t),r},Object.defineProperty(e.prototype,"attrib2",{get:function(){return this._attrib2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attrib3",{get:function(){return this._attrib3},enumerable:!0,configurable:!0}),e._COORD_BITS=16,e}(P.AbstractLRP);r.IntermediateLRP=i});r(U);U.IntermediateLRP;var j=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.put=function(t){t.putBits(e._RFU_VALUE,e._RFU_BITS),t.putBits(this._pOffsetF,e._POFFF_BITS),t.putBits(this._nOffsetF,e._NOFFF_BITS),t.putBits(this._bear,e._BEAR_BITS)},e.fromValues=function(t,r,n){var o=new e;return o._pOffsetF=t,o._nOffsetF=r,o._bear=n,o},e.fromBitStreamInput=function(t){if(t.getBits(e._RFU_BITS)!==e._RFU_VALUE)throw new Error("RFU in use");var r=new e;return r._pOffsetF=t.getBits(e._POFFF_BITS),r._nOffsetF=t.getBits(e._NOFFF_BITS),r._bear=t.getBits(e._BEAR_BITS),r},Object.defineProperty(e.prototype,"pOffsetF",{get:function(){return this._pOffsetF},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nOffsetF",{get:function(){return this._nOffsetF},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bear",{get:function(){return this._bear},enumerable:!0,configurable:!0}),e._RFU_BITS=1,e._POFFF_BITS=1,e._NOFFF_BITS=1,e._BEAR_BITS=5,e}(T.BinaryInformation);r.Attr4=i});r(j);j.Attr4;var Y=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.put=function(t){this.putCoordinates(t),this._attrib1.put(t),this._attrib4.put(t)},e.fromValues=function(t,r,n,o){var i=new e;return i._coordBits=e._COORD_BITS,i._lon=t,i._lat=r,i._attrib1=n,i._attrib4=o,i},e.fromBitStreamInput=function(t){var r=new e;return r._coordBits=e._COORD_BITS,r._read(t),r._attrib1=F.Attr1.fromBitStreamInput(t),r._attrib4=j.Attr4.fromBitStreamInput(t),r},Object.defineProperty(e.prototype,"attrib4",{get:function(){return this._attrib4},enumerable:!0,configurable:!0}),e._COORD_BITS=16,e}(P.AbstractLRP);r.LastLRP=i});r(Y);Y.LastLRP;var Z=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.put=function(t){t.putBits(this._offset,e._OFFSET_BITS)},e.fromValues=function(t){var r=new e;return r._offset=t,r},e.fromBitStreamInput=function(t){var r=new e;return r._offset=t.getBits(e._OFFSET_BITS),r},Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),e._OFFSET_BITS=8,e}(T.BinaryInformation);r.Offset=i});r(Z);Z.Offset;var H=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.hasPositiveOffset=function(){return 0!==this._pOffset||0!==this._pOffRelative},t.prototype.hasNegativeOffset=function(){return 0!==this._nOffset||0!==this._nOffRelative},t.prototype.getPositiveOffset=function(e){if(this.hasPositiveOffset()){if(this._version===O.BINARY_VERSION_2)return this._pOffset;if(this._version===O.BINARY_VERSION_3)return Math.round(this._pOffRelative*e/t._PERCENTAGE)}return 0},t.prototype.getNegativeOffset=function(e){if(this.hasNegativeOffset()){if(this._version===O.BINARY_VERSION_2)return this._nOffset;if(this._version===O.BINARY_VERSION_3)return Math.round(this._nOffRelative*e/t._PERCENTAGE)}return 0},t.fromValues=function(e,r){var n=new t;return n._pOffset=e,n._nOffset=r,n._version=O.BINARY_VERSION_2,n._pOffRelative=0,n._nOffRelative=0,n},t.fromRelativeValues=function(e,r){var n=new t;return n._pOffset=0,n._nOffset=0,n._version=O.BINARY_VERSION_3,n._pOffRelative=e,n._nOffRelative=r,n},t._PERCENTAGE=100,t}();e.Offsets=r});r(H);H.Offsets;var x=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getLocationReferencePoints=function(){return this._points},e.prototype.getOffsets=function(){return this._offsets},e.fromLineValues=function(t,r,n){var o=new e;return o._id=t,o._locationType=E.LocationType.LINE_LOCATION,o._returnCode=null,o._points=r,o._offsets=n,o},e}(L.RawLocationReference);r.RawLineLocationReference=i});r(x);x.RawLineLocationReference;var W=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.decodeData=function(t,e,r,n,o){for(var i=Math.floor((r-O.MIN_BYTES_LINE_LOCATION)/O.LRP_SIZE),a=V.FirstLRP.fromBitStreamInput(e),u=[],f=0;f<i;f++){var _=U.IntermediateLRP.fromBitStreamInput(e);u.push(_)}var c=Y.LastLRP.fromBitStreamInput(e),s=null,p=null;c.attrib4.pOffsetF===O.HAS_OFFSET&&(s=Z.Offset.fromBitStreamInput(e)),c.attrib4.nOffsetF===O.HAS_OFFSET&&(p=Z.Offset.fromBitStreamInput(e));var l=H.Offsets.fromValues(0,0);if(n===O.BINARY_VERSION_2){var I=0,h=0;null!==s&&(I=this._calculateDistanceEstimate(s.offset)),null!==p&&(h=this._calculateDistanceEstimate(p.offset)),l=H.Offsets.fromValues(I,h)}else if(n===O.BINARY_VERSION_3){I=0,h=0;null!==s&&(I=this._calculateRelativeDistance(s.offset)),null!==p&&(h=this._calculateRelativeDistance(p.offset)),l=H.Offsets.fromRelativeValues(I,h)}var d=1,R=[],E=this._createFirstLRP(d,a);d++,R.push(E);for(var y=E.getLongitudeDeg(),g=E.getLatitudeDeg(),A=0,L=u;A<L.length;A++){var S=L[A],T=this._createIntermediateLRPFromLatitudeLongitude(d,S,y,g);d++,R.push(T),y=T.getLongitudeDeg(),g=T.getLatitudeDeg()}var B=this._createLastLRP(d,c,y,g);R.push(B);var v=x.RawLineLocationReference.fromLineValues(t,R,l);return null!==o&&(o.negOffset=p,o.posOffset=s,o.lastLRP=c,o.intermediates=u,o.firstLRP=a),v},e}(D.AbstractDecoder);r.LineDecoder=i});r(W);W.LineDecoder;var k=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getLocationReferencePoints=function(){return this._points},e.prototype.getOffsets=function(){return this._offsets},e.prototype.getOrientation=function(){return this._orientation},e.prototype.getSideOfRoad=function(){return this._sideOfRoad},e.fromPointValues=function(t,r,n,o,i,a,u){var f=new e;return f._id=t,f._locationType=r,f._returnCode=null,f._points=[n,o],f._offsets=i,f._orientation=u,f._sideOfRoad=a,f},e}(L.RawLocationReference);r.RawPointLocationReference=i});r(k);k.RawPointLocationReference;var K=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.fromPointAlongLineValues=function(t,r,n,o,i,a){var u=new e;return u._id=t,u._locationType=E.LocationType.POINT_ALONG_LINE,u._returnCode=null,u._points=[r,n],u._offsets=o,u._orientation=a,u._sideOfRoad=i,u},e}(k.RawPointLocationReference);r.RawPointAlongLineLocationReference=i});r(K);K.RawPointAlongLineLocationReference;var X=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.decodeData=function(t,e,r,n,o){var i=V.FirstLRP.fromBitStreamInput(e),a=this._createFirstLRP(1,i),u=this._resolveOrientation(i.attrib1),f=Y.LastLRP.fromBitStreamInput(e),_=this._createLastLRP(2,f,a.getLongitudeDeg(),a.getLatitudeDeg()),c=this._resolveSideOfRoad(f.attrib1),s=H.Offsets.fromValues(0,0),p=null;if(1===f.attrib4.pOffsetF){p=Z.Offset.fromBitStreamInput(e);var l=this._calculateRelativeDistance(p.offset);s=H.Offsets.fromRelativeValues(l,0)}var I=K.RawPointAlongLineLocationReference.fromPointAlongLineValues(t,a,_,s,c,u);return null!==o&&(o.firstLRP=i,o.lastLRP=f,o.posOffset=p),I},e}(D.AbstractDecoder);r.PointAlongLineDecoder=i});r(X);X.PointAlongLineDecoder;var z=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.put=function(t){this.putCoordinates(t)},e.fromValues=function(t,r){var n=new e;return n._coordBits=e._COORD_BITS,n._lon=t,n._lat=r,n},e.fromBitStreamInput=function(t){var r=new e;return r._coordBits=e._COORD_BITS,r._read(t),r},e._COORD_BITS=24,e}(w.AbstractCoordinate);r.AbsoluteCoordinates=i});r(z);z.AbsoluteCoordinates;var Q=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.intersectsLineValues=function(e,r,n,o){return t.linesIntersect(e,r,n,o,this._x1,this._y1,this._x2,this._y2)},t.prototype.intersectsLineObject=function(e){return t.linesIntersect(e.x1,e.y1,e.x2,e.y2,this._x1,this._y1,this._x2,this._y2)},t.fromValues=function(e,r,n,o){var i=new t;return i._x1=e,i._y1=r,i._x2=n,i._y2=o,i},Object.defineProperty(t.prototype,"x1",{get:function(){return this._x1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y1",{get:function(){return this._y1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x2",{get:function(){return this._x2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y2",{get:function(){return this._y2},enumerable:!0,configurable:!0}),t.relativeCCW=function(t,e,r,n,o,i){var a=(o-=t)*(n-=e)-(i-=e)*(r-=t);return 0===a&&(a=o*r+i*n)>0&&(a=(o-=r)*r+(i-=n)*n)<0&&(a=0),a<0?-1:a>0?1:0},t.linesIntersect=function(e,r,n,o,i,a,u,f){return t.relativeCCW(e,r,n,o,i,a)*t.relativeCCW(e,r,n,o,u,f)<=0&&t.relativeCCW(i,a,u,f,e,r)*t.relativeCCW(i,a,u,f,n,o)<=0},t}();e.Line=r});r(Q);Q.Line;var q=n(function(t,e){var r,n;Object.defineProperty(e,"__esModule",{value:!0}),(n=r=e.BearingDirection||(e.BearingDirection={}))[n.IN_DIRECTION=1]="IN_DIRECTION",n[n.AGAINST_DIRECTION=2]="AGAINST_DIRECTION";var o=function(){function t(){throw new Error("Cannot instantiate utility class")}return t.geoCoordinatesDistance=function(e,r){return t.latitudeLongitudeDistance(e.getLongitudeDeg(),e.getLatitudeDeg(),r.getLongitudeDeg(),r.getLatitudeDeg())},t.latitudeLongitudeDistance=function(e,r,n,o){if(o===r&&n===e)return 0;var i=t._toRadians((o+r)/2),a=t._toRadians((o-r)/2),u=t._toRadians((n-e)/2),f=Math.sin(i),_=Math.sin(a),c=Math.cos(i),s=Math.cos(a),p=Math.sin(u),l=Math.cos(u),I=_*_*l*l+c*c*p*p;if(0===I)return 0;var h=s*s*l*l+f*f*p*p;if(0===h)return 0;var d=Math.atan(Math.sqrt(I/h));if(0===d)return 0;var R=2*d*t._EQUATORIAL_RADIUS,E=Math.sqrt(I*h)/d,O=(3*E-1)/(2*h),y=(3*E+1)/(2*I);return R*(1+t._OBLATENESS*O*f*f*s*s-t._OBLATENESS*y*c*c*_*_)},t.geoCoordinatesBearing=function(e,r){return t.latitudeLongitudeBearing(e.getLongitudeDeg(),e.getLatitudeDeg(),r.getLongitudeDeg(),r.getLatitudeDeg())},t.latitudeLongitudeBearing=function(e,r,n,o){var i=t._transformDecaMicroDeg(n-e)*t._hMult(o),a=t._transformDecaMicroDeg(o-r),u=t.toDegrees(Math.atan2(i,a));return u<0&&(u+=t.FULL_CIRCLE_DEGREE),u},t.calculateLineBearing=function(e,n,o,i){if(null===e)return-1;var a=null,u=null;return n===r.IN_DIRECTION?i>0?(a=e.getGeoCoordinateAlongLine(i),u=e.getLineLength()<i+o?e.getEndNode().getGeoCoordinates():e.getGeoCoordinateAlongLine(i+o)):(a=e.getStartNode().getGeoCoordinates(),u=e.getLineLength()<o?e.getEndNode().getGeoCoordinates():e.getGeoCoordinateAlongLine(o)):i>0?(a=e.getGeoCoordinateAlongLine(i),u=i<o?e.getStartNode().getGeoCoordinates():e.getGeoCoordinateAlongLine(i-o)):(a=e.getEndNode().getGeoCoordinates(),u=e.getLineLength()<o?e.getStartNode().getGeoCoordinates():e.getGeoCoordinateAlongLine(e.getLineLength()-o)),t.geoCoordinatesBearing(a,u)},t.checkCoordinateBounds=function(e,r){return e>=t.MIN_LON&&e<=t.MAX_LON&&r>=t.MIN_LAT&&r<=t.MAX_LAT},t.geoCoordinatesIntersectStraights=function(e,r,n,o){return t.latitudeLongitudeIntersectStraights(e.getLongitudeDeg(),e.getLatitudeDeg(),r,n.getLongitudeDeg(),n.getLatitudeDeg(),o)},t.latitudeLongitudeIntersectStraights=function(e,r,n,o,i,a){var u,f,_=Math.tan(t.toRadians(t.QUARTER_CIRCLE-n)),c=Math.tan(t.toRadians(t.QUARTER_CIRCLE-a));return 0===n?0===a?null:(f=+c*((u=e)-o)+i,isFinite(u)&&isFinite(f)?J.GeoCoordinates.fromValues(u,f):null):0===a?0===n?null:(f=+_*((u=o)-e)+r,isFinite(u)&&isFinite(f)?J.GeoCoordinates.fromValues(u,f):null):isNaN(_)||!isFinite(_)||isNaN(c)||!isFinite(c)?null:_===c?null:(f=r+_*((u=(_*e-c*o+i-r)/(_-c))-e),isFinite(u)&&isFinite(f)?J.GeoCoordinates.fromValues(u,f):null)},t.lineIntersection=function(t,e,r,n){var o=Q.Line.fromValues(t.getLongitudeDeg(),t.getLatitudeDeg(),e.getLongitudeDeg(),e.getLatitudeDeg()),i=Q.Line.fromValues(r.getLongitudeDeg(),r.getLatitudeDeg(),n.getLongitudeDeg(),n.getLatitudeDeg());return o.intersectsLineObject(i)},t.geoCoordinatesPointAlongLine=function(e,r,n){return t.latitudeLongitudePointAlongLine(e.getLongitudeDeg(),e.getLatitudeDeg(),r.getLongitudeDeg(),r.getLatitudeDeg(),n)},t.latitudeLongitudePointAlongLine=function(t,e,r,n,o){var i=Math.abs(r-t),a=n-e;t>r&&(i=-i),e<n?a<0&&(a=-a):a>0&&(a=-a);var u=t+(i*=o),f=e+(a*=o);return J.GeoCoordinates.fromValues(u,f)},t.geoCoordinatesScaleUpperRightCoordinate=function(e,r,n,o){return t.latitudeLongitudeScaleUpperRightCoordinate(e.getLongitudeDeg(),e.getLatitudeDeg(),r.getLongitudeDeg(),r.getLatitudeDeg(),n,o)},t.latitudeLongitudeScaleUpperRightCoordinate=function(e,r,n,o,i,a){var u=t.latitudeLongitudePointAlongLine(e,r,n,r,i),f=t.latitudeLongitudePointAlongLine(e,r,e,o,a);return J.GeoCoordinates.fromValues(u.getLongitudeDeg(),f.getLatitudeDeg())},t.roundDefault=function(e){return t.roundDecimalPlaces(e,t._DEFAULT_PRECISION)},t.roundDecimalPlaces=function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},t.geoCoordinatesDetermineCoordinateInDistance=function(e,r,n){return t.latitudeLongitudeDetermineCoordinateInDistance(e.getLongitudeDeg(),e.getLatitudeDeg(),r,n)},t.latitudeLongitudeDetermineCoordinateInDistance=function(e,r,n,o){for(var i=r*Math.PI/t.HALF_CIRCLE,a=n*Math.PI/t.HALF_CIRCLE,u=Math.sin(i),f=Math.cos(i),_=Math.cos(a),c=Math.sin(a),s=f*c,p=Math.sin(o/(t._EQUATORIAL_RADIUS/t._METER_PER_KILOMETER)),l=Math.cos(o/(t._EQUATORIAL_RADIUS/t._METER_PER_KILOMETER)),I=u*p-f*l*_,h=Math.atan((u*l+f*p*_)/Math.sqrt(s*s+I*I))*t.HALF_CIRCLE/Math.PI,d=e+Math.atan(p*c/(f*l-u*p*_))*t.HALF_CIRCLE/Math.PI+2*t.FULL_CIRCLE_DEGREE;h>t.QUARTER_CIRCLE;)h-=t.FULL_CIRCLE_DEGREE;for(;d>t.HALF_CIRCLE;)d-=t.FULL_CIRCLE_DEGREE;return J.GeoCoordinates.fromValues(d,h)},t.toDegrees=function(t){return t*(180/Math.PI)},t.toRadians=function(t){return t*(Math.PI/180)},t._toRadians=function(e){return e*t._RAD_FACTOR},t._transformDecaMicroDeg=function(e){return e*t._DIVISIONS_PER_DEGREE},t._hMult=function(e){return Math.cos(e*t._RAD_FACTOR)},t.bearingDirection={IN_DIRECTION:r.IN_DIRECTION,AGAINST_DIRECTION:r.AGAINST_DIRECTION},t.FULL_CIRCLE_DEGREE=360,t.MAX_LAT=90,t.MIN_LAT=-90,t.MAX_LON=180,t.MIN_LON=-180,t.ZERO_CIRCLE=0,t.HALF_CIRCLE=180,t.QUARTER_CIRCLE=90,t.THREE_QUARTER_CIRCLE=270,t._DEFAULT_PRECISION=5,t._METER_PER_KILOMETER=1e3,t._DIVISIONS_PER_DEGREE=1e5,t._RAD_FACTOR=.017453292519943295,t._EQUATORIAL_RADIUS=6378137,t._INVERSE_FLATTENING=298.257223563,t._OBLATENESS=1/t._INVERSE_FLATTENING,t}();e.GeometryUtils=o});r(q);q.BearingDirection,q.GeometryUtils;var J=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.getLatitudeDeg=function(){return this._latitude},t.prototype.getLongitudeDeg=function(){return this._longitude},t.fromValues=function(e,r){if(!q.GeometryUtils.checkCoordinateBounds(e,r))throw new Error("Coordinates out of bounds");var n=new t;return n._longitude=e,n._latitude=r,n},t}();e.GeoCoordinates=r});r(J);J.GeoCoordinates;var $=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getGeoCoordinates=function(){return this._geoCoord},e.fromGeoCoordValues=function(t,r){var n=new e;return n._id=t,n._locationType=E.LocationType.GEO_COORDINATES,n._returnCode=null,n._geoCoord=r,n},e}(k.RawPointLocationReference);r.RawGeoCoordLocationReference=i});r($);$.RawGeoCoordLocationReference;var tt=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.decodeData=function(t,e,r,n,o){var i=z.AbsoluteCoordinates.fromBitStreamInput(e),a=J.GeoCoordinates.fromValues(this._calculate32BitRepresentation(i.lon),this._calculate32BitRepresentation(i.lat)),u=$.RawGeoCoordLocationReference.fromGeoCoordValues(t,a);return null!==o&&(o.absCoord=i),u},e}(D.AbstractDecoder);r.GeoCoordDecoder=i});r(tt);tt.GeoCoordDecoder;var et=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.put=function(t){this.putCoordinates(t)},e.fromValues=function(t,r){var n=new e;return n._coordBits=e._COORD_BITS,n._lon=t,n._lat=r,n},e.fromBitStreamInput=function(t){var r=new e;return r._coordBits=e._COORD_BITS,r._read(t),r},e._COORD_BITS=16,e}(w.AbstractCoordinate);r.RelativeCoordinates=i});r(et);et.RelativeCoordinates;var rt=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getCornerPoints=function(){return this._corners},e.fromPolygonValues=function(t,r){var n=new e;return n._id=t,n._locationType=E.LocationType.POLYGON,n._returnCode=null,n._corners=r,n},e}(L.RawLocationReference);r.RawPolygonLocationReference=i});r(rt);rt.RawPolygonLocationReference;var nt=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.decodeData=function(t,e,r,n,o){var i=(r-(O.HEADER_SIZE+O.ABS_COORD_SIZE))/O.RELATIVE_COORD_SIZE,a=[],u=z.AbsoluteCoordinates.fromBitStreamInput(e),f=J.GeoCoordinates.fromValues(this._calculate32BitRepresentation(u.lon),this._calculate32BitRepresentation(u.lat));a.push(f);for(var _=u,c=0;c<i;c++){var s=et.RelativeCoordinates.fromBitStreamInput(e),p=this._calculate32BitRepresentation(_.lon)+Math.fround(s.lon/O.DECA_MICRO_DEG_FACTOR),l=this._calculate32BitRepresentation(_.lat)+Math.fround(s.lat/O.DECA_MICRO_DEG_FACTOR),I=J.GeoCoordinates.fromValues(p,l);a.push(I),_=z.AbsoluteCoordinates.fromValues(this._get24BitRepresentation(I.getLongitudeDeg()),this._get24BitRepresentation(I.getLatitudeDeg()))}return rt.RawPolygonLocationReference.fromPolygonValues(t,a)},e}(D.AbstractDecoder);r.PolygonDecoder=i});r(nt);nt.PolygonDecoder;var ot=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getCenterPoint=function(){return this._center},e.prototype.getRadius=function(){return this._radius},e.fromCircleValues=function(t,r,n){var o=new e;return o._id=t,o._locationType=E.LocationType.CIRCLE,o._center=r,o._radius=n,o},e}(k.RawPointLocationReference);r.RawCircleLocationReference=i});r(ot);ot.RawCircleLocationReference;var it=n(function(t,e){var r,n;Object.defineProperty(e,"__esModule",{value:!0}),(n=r=e.RadiusType||(e.RadiusType={}))[n.SMALL=1]="SMALL",n[n.MEDIUM=2]="MEDIUM",n[n.LARGE=3]="LARGE",n[n.EXTRA_LARGE=4]="EXTRA_LARGE",n[n.UNKNOWN=0]="UNKNOWN",e.resolveRadius=function(t){return t>=r.UNKNOWN&&t<=r.EXTRA_LARGE?t:r.UNKNOWN};var o=function(){function t(){}return t.prototype.put=function(e){if(this._radius<=t._MAX_RADIUS_SMALL)e.putBits(this._radius,O.SMALL_RADIUS_BITS);else if(this._radius<=t._MAX_RADIUS_MEDIUM)e.putBits(this._radius,O.MEDIUM_RADIUS_BITS);else if(this._radius<=t._MAX_RADIUS_LARGE)e.putBits(this._radius,O.LARGE_RADIUS_BITS);else{if(!(this._radius<=t._MAX_RADIUS_EXTRA_LARGE))throw new Error("Invalid range");e.putBits(this._radius,O.EXTRA_LARGE_RADIUS_BITS)}},t.fromValues=function(e){var r=new t;return r._radius=e,r},t.fromBitStreamInput=function(e,n){var o=new t;switch(n){case r.SMALL:o._radius=t._intToLong(e.getBits(O.SMALL_RADIUS_BITS));break;case r.MEDIUM:o._radius=t._intToLong(e.getBits(O.MEDIUM_RADIUS_BITS));break;case r.LARGE:o._radius=t._intToLong(e.getBits(O.LARGE_RADIUS_BITS));break;case r.EXTRA_LARGE:o._radius=t._intToLong(e.getBits(O.EXTRA_LARGE_RADIUS_BITS));break;default:throw new Error("Invalid value range")}return o},Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),t._intToLong=function(e){return e<0?e&t._MAX_RADIUS_EXTRA_LARGE-1:e},t._MAX_RADIUS_SMALL=Math.pow(2,O.SMALL_RADIUS_BITS),t._MAX_RADIUS_MEDIUM=Math.pow(2,O.MEDIUM_RADIUS_BITS),t._MAX_RADIUS_LARGE=Math.pow(2,O.LARGE_RADIUS_BITS),t._MAX_RADIUS_EXTRA_LARGE=Math.pow(2,O.EXTRA_LARGE_RADIUS_BITS),t}();e.Radius=o});r(it);it.RadiusType,it.resolveRadius,it.Radius;var at=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BASE_SIZE=O.HEADER_SIZE+O.ABS_COORD_SIZE,e}return o(e,t),e.prototype.decodeData=function(t,e,r,n,o){var i=r-this.BASE_SIZE,a=it.resolveRadius(i),u=z.AbsoluteCoordinates.fromBitStreamInput(e),f=J.GeoCoordinates.fromValues(this._calculate32BitRepresentation(u.lon),this._calculate32BitRepresentation(u.lat)),_=it.Radius.fromBitStreamInput(e,a),c=ot.RawCircleLocationReference.fromCircleValues(t,f,_.radius);return null!==o&&(o.absCoord=u),c},e}(D.AbstractDecoder);r.CircleDecoder=i});r(at);at.CircleDecoder;var ut=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(){}}();e.RawBinaryData=r});r(ut);ut.RawBinaryData;var ft=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.decodeData=function(t){var e=t.getLocationReferenceData();return null===e?S.RawInvalidLocationReference.fromIdAndStatusCode(t.getId(),y.BinaryReturnCode.NOT_ENOUGH_BYTES):this._parseBinaryData(t.getId(),e,null)},t.prototype.getDataFormatIdentifier=function(){return O.IDENTIFIER},t.prototype.resolveBinaryData=function(t,e){var r=new ut.RawBinaryData;return this._parseBinaryData(t,e,r),r},t.prototype._checkVersion=function(e){for(var r=e.ver,n=0,o=t._VERSIONS;n<o.length;n++){if(o[n]===r)return!0}return!1},t.prototype._parseBinaryData=function(t,e,r){var n=e.length;if(n<Math.min(O.MIN_BYTES_LINE_LOCATION,Math.min(Math.min(O.MIN_BYTES_POINT_LOCATION,O.MIN_BYTES_POLYGON),O.MIN_BYTES_CLOSED_LINE_LOCATION)))return S.RawInvalidLocationReference.fromIdAndStatusCode(t,y.BinaryReturnCode.NOT_ENOUGH_BYTES);var o,i=A.BitStreamInput.fromBufferAndLength(e,n);try{o=B.Header.fromBitStreamInput(i),null!==r&&(r.header=o)}catch(e){return S.RawInvalidLocationReference.fromIdAndStatusCode(t,y.BinaryReturnCode.READING_HEADER_FAILURE)}if(!this._checkVersion(o))return S.RawInvalidLocationReference.fromIdAndStatusCode(t,y.BinaryReturnCode.INVALID_VERSION);var a=o.pf===O.IS_POINT,u=o.af===O.HAS_ATTRIBUTES,f=o.arf,_=0===f&&!a&&!u||f>0,c=null,s=null;if(a||_||!u)if(a&&!_)if(u)if(n===O.POINT_ALONG_LINE_SIZE||n===O.POINT_ALONG_LINE_SIZE+O.POINT_OFFSET_SIZE)s=new X.PointAlongLineDecoder;else{if(n===O.POINT_WITH_ACCESS_SIZE||n===O.POINT_WITH_ACCESS_SIZE+O.POINT_OFFSET_SIZE)throw new Error("PoiAccessDecider not implemented");c=S.RawInvalidLocationReference.fromIdAndStatusCode(t,y.BinaryReturnCode.INVALID_BYTE_SIZE)}else n===O.GEOCOORD_SIZE?s=new tt.GeoCoordDecoder:c=S.RawInvalidLocationReference.fromIdAndStatusCode(t,y.BinaryReturnCode.INVALID_BYTE_SIZE);else if(_&&!a&&u){if(n>=O.MIN_BYTES_CLOSED_LINE_LOCATION)throw new Error("ClosedLineDecoder not implemented");c=S.RawInvalidLocationReference.fromIdAndStatusCode(t,y.BinaryReturnCode.INVALID_BYTE_SIZE)}else switch(f){case O.AREA_CODE_CIRCLE:s=new at.CircleDecoder;break;case O.AREA_CODE_RECTANGLE:if(n===O.RECTANGLE_SIZE||n===O.LARGE_RECTANGLE_SIZE)throw new Error("RectangleDecoder not implemented");if(n===O.GRID_SIZE||n===O.LARGE_GRID_SIZE)throw new Error("GridDecoder not implemented");c=S.RawInvalidLocationReference.fromIdAndStatusCode(t,y.BinaryReturnCode.INVALID_BYTE_SIZE);break;case O.AREA_CODE_POLYGON:!u&&n>=O.MIN_BYTES_POLYGON?s=new nt.PolygonDecoder:c=S.RawInvalidLocationReference.fromIdAndStatusCode(t,y.BinaryReturnCode.INVALID_BYTE_SIZE);break;default:c=S.RawInvalidLocationReference.fromIdAndStatusCode(t,y.BinaryReturnCode.INVALID_HEADER)}else s=new W.LineDecoder;return null!==s&&(c=s.decodeData(t,i,n,o.ver,r)),c},t.getVersions=function(){return t._VERSIONS},t._VERSIONS=[2,3],t}();e.BinaryDecoder=r});r(ft);ft.BinaryDecoder;var _t=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.getReturnCode=function(){return this._returnCode},t.prototype.getId=function(){return this._id},t.prototype.isValid=function(){return null===this._returnCode},t.prototype.getDataIdentifier=function(){return O.IDENTIFIER},t.prototype.getLocationReferenceData=function(){return this.isValid()?this._data:null},t.prototype.getLocationType=function(){return this._locationType},t.prototype.getVersion=function(){return this._version},t.fromIdAndBuffer=function(e,r){var n=new t;n._id=e,n._data=r,n._returnCode=null,n._locationType=t._resolveLocationType(r);var o=t._resolveVersion(r);if(!t._checkVersion(o))throw new Error("Invalid version");return n._version=o,n},t.fromValues=function(e,r,n,o){var i=new t;return i._id=e,i._data=null,i._returnCode=r,i._locationType=n,i._version=o,i},t._checkVersion=function(t){for(var e=0,r=ft.BinaryDecoder.getVersions();e<r.length;e++){if(t===r[e])return!0}return!1},t._resolveVersion=function(e){if(null===e||0===e.length)throw new Error("Invalid binary data");return e[0]&t._VERSION_MASK},t._resolveLocationType=function(t){var e=null,r=t.length,n=A.BitStreamInput.fromBufferAndLength(t,r),o=B.Header.fromBitStreamInput(n),i=o.af===O.HAS_ATTRIBUTES,a=o.pf===O.IS_POINT,u=o.arf,f=0===u&&!a&&!i||u>0;if(a||f||!i)if(a&&!f)if(i)if(r===O.POINT_ALONG_LINE_SIZE||r===O.POINT_ALONG_LINE_SIZE+O.POINT_OFFSET_SIZE)e=E.LocationType.POINT_ALONG_LINE;else{if(r!==O.POINT_WITH_ACCESS_SIZE&&r!==O.POINT_WITH_ACCESS_SIZE+O.POINT_OFFSET_SIZE)throw new Error("Bye size does not match point location");e=E.LocationType.POI_WITH_ACCESS_POINT}else{if(r!==O.GEOCOORD_SIZE)throw new Error("Byte size does not match geo coordinate location");e=E.LocationType.GEO_COORDINATES}else if(f&&!a&&i){if(!(r>=O.MIN_BYTES_CLOSED_LINE_LOCATION))throw new Error("Byte size does not match closed line location");e=E.LocationType.CLOSED_LINE}else switch(u){case O.AREA_CODE_CIRCLE:e=E.LocationType.CIRCLE;break;case O.AREA_CODE_RECTANGLE:if(r===O.RECTANGLE_SIZE||r===O.LARGE_RECTANGLE_SIZE)e=E.LocationType.RECTANGLE;else{if(r!==O.GRID_SIZE&&r!==O.LARGE_GRID_SIZE)throw new Error("Byte size does not match area rectangle location");e=E.LocationType.GRID}break;case O.AREA_CODE_POLYGON:if(i||!(r>=O.MIN_BYTES_POLYGON))throw new Error("Byte size does not match polygon location");e=E.LocationType.POLYGON;break;default:throw new Error("Byte size does not match area location")}else e=E.LocationType.LINE_LOCATION;return e},t._VERSION_MASK=7,t}();e.LocationReference=r});r(_t);_t.LocationReference;var ct=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.put=function(t){t.putBits(e._RFU_VALUE,e._NR_RFU),t.putBits(this._frc,e._FRC_BITS),t.putBits(this._fow,e._FOW_BITS)},e.fromValues=function(t,r){var n=new e;return n._frc=t,n._fow=r,n},e.fromBitStreamInput=function(t){if(t.getBits(e._NR_RFU)!==e._RFU_VALUE)throw new Error("RFU in use");var r=new e;return r._frc=t.getBits(e._FRC_BITS),r._fow=t.getBits(e._FOW_BITS),r},Object.defineProperty(e.prototype,"frc",{get:function(){return this._frc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fow",{get:function(){return this._fow},enumerable:!0,configurable:!0}),e._NR_RFU=2,e._FRC_BITS=3,e._FOW_BITS=3,e}(T.BinaryInformation);r.Attr5=i});r(ct);ct.Attr5;var st=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.put=function(t){t.putBits(e._RFU_VALUE,e._NR_RFU),t.putBits(this._bear,e._BEAR_BITS)},e.fromValues=function(t){var r=new e;return r._bear=t,r},e.fromBitStreamInput=function(t){if(t.getBits(e._NR_RFU)!==e._RFU_VALUE)throw new Error("RFU in use");var r=new e;return r._bear=t.getBits(e._BEAR_BITS),r},Object.defineProperty(e.prototype,"bear",{get:function(){return this._bear},enumerable:!0,configurable:!0}),e._NR_RFU=3,e._BEAR_BITS=5,e}(T.BinaryInformation);r.Attr6=i});r(st);st.Attr6;var pt=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.put=function(t){this._attrib5.put(t),this._attrib6.put(t)},e.fromValues=function(t,r){var n=new e;return n._attrib5=t,n._attrib6=r,n},e.fromBitStreamInput=function(t){var r=new e;return r._attrib5=ct.Attr5.fromBitStreamInput(t),r._attrib6=st.Attr6.fromBitStreamInput(t),r},Object.defineProperty(e.prototype,"attrib5",{get:function(){return this._attrib5},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attrib6",{get:function(){return this._attrib6},enumerable:!0,configurable:!0}),e}(T.BinaryInformation);r.LastClosedLineLRP=i});r(pt);pt.LastClosedLineLRP;var lt=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.encodeData=function(t,e){throw new Error("This method is abstract")},t.prototype._checkOffsets=function(t,e,r){var n=0,o=-1;return e?(n=r[0].getDistanceToNext(),o=t.getPositiveOffset(n)):(n=r[r.length-2].getDistanceToNext(),o=t.getNegativeOffset(n)),o<=n},t.prototype._generateOffset=function(t,e,r,n){var o=0,i=-1;e?(o=n[0].getDistanceToNext(),i=t.getPositiveOffset(o)):(o=n[n.length-2].getDistanceToNext(),i=t.getNegativeOffset(o));var a=null;if(i>0){var u=-1;if(r===O.BINARY_VERSION_2)u=this._calculateLengthInterval(i);else{if(r!==O.BINARY_VERSION_3)throw new Error("Invalid version");u=this._calculateRelativeInterval(i,o)}a=Z.Offset.fromValues(u)}return a},t.prototype._generateRadius=function(t){return it.Radius.fromValues(t)},t.prototype._calculateRelativeInterval=function(t,e){return t===e?O.OFFSET_BUCKETS-1:Math.floor(O.OFFSET_BUCKETS*t/e)},t.prototype._generateHeader=function(t,e,r){var n=O.IS_NOT_POINT,o=O.IS_NOT_AREA;E.POINTS_LOCATIONS.has(e)?n=O.IS_POINT:E.AREA_LOCATIONS.has(e)&&(e===E.LocationType.CIRCLE?o=O.AREA_CODE_CIRCLE:e===E.LocationType.RECTANGLE?o=O.AREA_CODE_RECTANGLE:e===E.LocationType.GRID?o=O.AREA_CODE_GRID:e===E.LocationType.POLYGON?o=O.AREA_CODE_POLYGON:e===E.LocationType.CLOSED_LINE&&(o=O.AREA_CODE_CLOSEDLINE));var i=O.HAS_NO_ATTRIBUTES;return r&&(i=O.HAS_ATTRIBUTES),B.Header.fromValues(o,i,n,t)},t.prototype._generateFirstLRPFromLRP=function(t){return V.FirstLRP.fromValues(this._get24BitRepresentation(t.getLongitudeDeg()),this._get24BitRepresentation(t.getLatitudeDeg()),this._generateAttribute1FromLRP(t),this._generateAttribute2(t),this._generateAttribute3(t))},t.prototype._generateFirstLRPFromLRPAndOrientation=function(t,e){return V.FirstLRP.fromValues(this._get24BitRepresentation(t.getLongitudeDeg()),this._get24BitRepresentation(t.getLatitudeDeg()),this._generateAttribute1FromLRPAndOrientation(t,e),this._generateAttribute2(t),this._generateAttribute3(t))},t.prototype._generateLastLrpFromPointsAndOffsets=function(t,e,r){var n=t.length,o=t[n-1],i=t[n-2];return Y.LastLRP.fromValues(this._getRelativeRepresentation(i.getLongitudeDeg(),o.getLongitudeDeg()),this._getRelativeRepresentation(i.getLatitudeDeg(),o.getLatitudeDeg()),this._generateAttribute1FromLRP(o),this._generateAttribute4(o,e,r))},t.prototype._generateLastLrpFromPointsAndOffsetAndSideOfRoad=function(t,e,r){var n=t.length,o=t[n-1],i=t[n-2];return Y.LastLRP.fromValues(this._getRelativeRepresentation(i.getLongitudeDeg(),o.getLongitudeDeg()),this._getRelativeRepresentation(i.getLatitudeDeg(),o.getLatitudeDeg()),this._generateAttribute1FromLRPAndSideOfRoad(o,r),this._generateAttribute4(o,e,null))},t.prototype._generateLRPs=function(t){for(var e=[],r=t.length,n=1;n<r-1;n++){var o=t[n],i=t[n-1],a=U.IntermediateLRP.fromValues(this._getRelativeRepresentation(i.getLongitudeDeg(),o.getLongitudeDeg()),this._getRelativeRepresentation(i.getLatitudeDeg(),o.getLatitudeDeg()),this._generateAttribute1FromLRP(o),this._generateAttribute2(o),this._generateAttribute3(o));e.push(a)}return e},t.prototype._generateLastLineLRP=function(t){var e=t[t.length-1];return pt.LastClosedLineLRP.fromValues(this._generateAttribute5(e),this._generateAttribute6(e))},t.prototype._generateAttribute2=function(t){var e=t.getLfrc();if(null===e)throw new Error("Last FRC cannot be null");return M.Attr2.fromValues(C.getId(e),this._calculateBearingInterval(t.getBearing()))},t.prototype._generateAttribute6=function(t){return st.Attr6.fromValues(this._calculateBearingInterval(t.getBearing()))},t.prototype._generateAttribute1FromLRP=function(t){var e=t.getFRC(),r=t.getFOW();if(null===e||null===r)throw new Error("FRC and FOW cannot be null");return F.Attr1.fromValues(C.getId(e),b.getId(r),0)},t.prototype._generateAttribute1FromLRPAndSideOfRoad=function(t,e){var r=t.getFRC(),n=t.getFOW();if(null===r||null===n)throw new Error("FRC and FOW cannot be null");return F.Attr1.fromValues(C.getId(r),b.getId(n),v.getId(e))},t.prototype._generateAttribute1FromLRPAndOrientation=function(t,e){var r=t.getFRC(),n=t.getFOW();if(null===r||null===n)throw new Error("FRC and FOW cannot be null");return F.Attr1.fromValues(C.getId(r),b.getId(n),N.getId(e))},t.prototype._generateAttribute3=function(t){return G.Attr3.fromValues(this._calculateLengthInterval(t.getDistanceToNext()))},t.prototype._generateAttribute4=function(t,e,r){var n=0;null!==e&&(n=1);var o=0;return null!==r&&(o=1),j.Attr4.fromValues(n,o,this._calculateBearingInterval(t.getBearing()))},t.prototype._generateAttribute5=function(t){var e=t.getFRC(),r=t.getFOW();if(null===e||null===r)throw new Error("FRC and FOW cannot be null");return ct.Attr5.fromValues(C.getId(e),b.getId(r))},t.prototype._calculateBearingInterval=function(t){return Math.floor(t/O.BEARING_SECTOR)},t.prototype._calculateLengthInterval=function(t){return Math.floor(t/O.LENGTH_INTERVAL)},t.prototype._get24BitRepresentation=function(t){var e=Math.sign(t);return Math.round(e*O.ROUND_FACTOR+t*O.BIT24FACTOR)},t.prototype._getRelativeRepresentation=function(t,e){return Math.round(O.DECA_MICRO_DEG_FACTOR*(e-t))},t.prototype._generateAbsCoord=function(t){return z.AbsoluteCoordinates.fromValues(this._get24BitRepresentation(t.getLongitudeDeg()),this._get24BitRepresentation(t.getLatitudeDeg()))},t.prototype._generateRelativeCoordinates=function(t,e){return et.RelativeCoordinates.fromValues(this._getRelativeRepresentation(t.getLongitudeDeg(),e.getLongitudeDeg()),this._getRelativeRepresentation(t.getLatitudeDeg(),e.getLatitudeDeg()))},t.prototype._fitsInto2Bytes=function(t){return t>=-Math.pow(2,15)&&t<=Math.pow(2,15)-1},t}();e.AbstractEncoder=r});r(lt);lt.AbstractEncoder;var It=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.putBits=function(t,e){if(0===e)return t;if(e>g.BitStreamAbstract._MAX_BIT_SIZE||e<1)throw new Error("Invalid bit size");this._currentBit+e>this._totalBufferLengthBytes<<g.BitStreamAbstract._BIT_BYTE_SHIFT&&this._expandBuffer();var r=this._currentBit+e-1>>>g.BitStreamAbstract._BIT_BYTE_SHIFT,n=this._currentBit>>>g.BitStreamAbstract._BIT_BYTE_SHIFT,o=g.BitStreamAbstract._BYTE_SIZE-this._currentBit%g.BitStreamAbstract._BYTE_SIZE,i=t;if(o>=e)this._buffer[n]&=g.BitStreamAbstract._COMPLEMENT_MASK[o],this._buffer[n]|=g.BitStreamAbstract._BITMASK[o]&i<<o-e;else{var a=(e-o)%g.BitStreamAbstract._BYTE_SIZE;for(a>0&&(this._buffer[r]=0,this._buffer[r]|=i<<g.BitStreamAbstract._BYTE_SIZE-a&g.BitStreamAbstract._BITMASK[g.BitStreamAbstract._BYTE_SIZE],i>>=a,r--);r>n;r--)this._buffer[r]=0,this._buffer[r]|=i&g.BitStreamAbstract._BITMASK[g.BitStreamAbstract._BYTE_SIZE],i>>>=g.BitStreamAbstract._BYTE_SIZE;this._buffer[r]&=g.BitStreamAbstract._COMPLEMENT_MASK[o],this._buffer[r]|=i&g.BitStreamAbstract._BITMASK[o]}return this._currentBit+=e,t},e.prototype.getData=function(){return this._getData()},e.fromValues=function(){var t=new e;return t._createBuffer(e._DEFAULT_BUFFER_LENGTH),t._currentBit=0,t},e.fromLength=function(t){var r=new e;return r._createBuffer(t),r._currentBit=0,r},e}(g.BitStreamAbstract);r.BitStreamOutput=i});r(It);It.BitStreamOutput;var ht=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.encodeData=function(t,e){var r=t.getLocationReferencePoints();if(null!==r){var n=t.getOffsets();if(null===r||null===n||r.length<=0)return _t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.MISSING_DATA,E.LocationType.LINE_LOCATION,e);var o=this._checkOffsets(n,!0,r);return o&&(o=this._checkOffsets(n,!1,r))?_t.LocationReference.fromIdAndBuffer(t.getId(),this._generateBinaryLineLocation(r,n,e)):_t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.INVALID_OFFSET,E.LocationType.LINE_LOCATION,e)}return _t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.MISSING_DATA,E.LocationType.LINE_LOCATION,e)},e.prototype._generateBinaryLineLocation=function(t,e,r){var n=this._generateHeader(r,E.LocationType.LINE_LOCATION,!0),o=this._generateFirstLRPFromLRP(t[0]),i=this._generateLRPs(t),a=this._generateOffset(e,!0,r,t),u=this._generateOffset(e,!1,r,t),f=this._generateLastLrpFromPointsAndOffsets(t,a,u),_=It.BitStreamOutput.fromValues();n.put(_),o.put(_);for(var c=0,s=i;c<s.length;c++){s[c].put(_)}return f.put(_),null!==a&&a.put(_),null!==u&&u.put(_),_.getData()},e}(lt.AbstractEncoder);r.LineEncoder=i});r(ht);ht.LineEncoder;var dt=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.encodeData=function(t,e){if(null===t.getLocationReferencePoints())return _t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.MISSING_DATA,E.LocationType.POINT_ALONG_LINE,e);var r=t.getLocationReferencePoints();if(null===r||r.length<=0)return _t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.MISSING_DATA,E.LocationType.POINT_ALONG_LINE,e);var n=r[0],o=r[1],i=t.getOffsets(),a=t.getSideOfRoad(),u=t.getOrientation();return null===n||null===o||null===i||null===a||null===u?_t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.MISSING_DATA,E.LocationType.POINT_ALONG_LINE,e):e<O.BINARY_VERSION_3?_t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.INVALID_VERSION,E.LocationType.POI_WITH_ACCESS_POINT,e):this._checkOffsets(i,!0,r)?_t.LocationReference.fromIdAndBuffer(t.getId(),this._generateBinaryPointAlongLineLocation(n,o,i,a,u,e)):_t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.INVALID_OFFSET,E.LocationType.POINT_ALONG_LINE,e)},e.prototype._generateBinaryPointAlongLineLocation=function(t,e,r,n,o,i){var a=this._generateHeader(i,E.LocationType.POINT_ALONG_LINE,!0),u=this._generateFirstLRPFromLRPAndOrientation(t,o),f=[t,e],_=this._generateOffset(r,!0,i,f);if(null===_)throw new Error("Positive offset cannot be null");var c=this._generateLastLrpFromPointsAndOffsetAndSideOfRoad(f,_,n),s=It.BitStreamOutput.fromValues();return a.put(s),u.put(s),c.put(s),null!==_&&_.put(s),s.getData()},e}(lt.AbstractEncoder);r.PointAlongLineEncoder=i});r(dt);dt.PointAlongLineEncoder;var Rt=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.encodeData=function(t,e){var r=t.getGeoCoordinates();return null===r?_t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.MISSING_DATA,E.LocationType.GEO_COORDINATES,e):e<3?_t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.INVALID_VERSION,E.LocationType.GEO_COORDINATES,e):_t.LocationReference.fromIdAndBuffer(t.getId(),this._generateBinaryGeoCoordLocation(r,e))},e.prototype._generateBinaryGeoCoordLocation=function(t,e){var r=this._generateHeader(e,E.LocationType.GEO_COORDINATES,!1),n=this._generateAbsCoord(t),o=It.BitStreamOutput.fromValues();return r.put(o),n.put(o),o.getData()},e}(lt.AbstractEncoder);r.GeoCoordEncoder=i});r(Rt);Rt.GeoCoordEncoder;var Et=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.encodeData=function(t,e){var r=t.getId(),n=t.getCornerPoints();if(null===n)return _t.LocationReference.fromValues(r,y.BinaryReturnCode.MISSING_DATA,E.LocationType.POLYGON,e);if(e<O.BINARY_VERSION_3)return _t.LocationReference.fromValues(r,y.BinaryReturnCode.INVALID_VERSION,E.LocationType.POLYGON,e);var o=null;try{o=_t.LocationReference.fromIdAndBuffer(t.getId(),this._generateBinaryPolygonLocation(n,e))}catch(t){o=_t.LocationReference.fromValues(r,y.BinaryReturnCode.INVALID_BINARY_DATA,E.LocationType.POLYGON,e)}return o},e.prototype._generateBinaryPolygonLocation=function(t,e){for(var r=t[0],n=this._generateAbsCoord(r),o=[],i=1;i<t.length;i++){var a=t[i],u=this._getRelativeRepresentation(r.getLongitudeDeg(),a.getLongitudeDeg()),f=this._getRelativeRepresentation(r.getLatitudeDeg(),a.getLatitudeDeg());if(this._fitsInto2Bytes(u)&&this._fitsInto2Bytes(f)){var _=et.RelativeCoordinates.fromValues(u,f);o.push(_),r=a}}var c=this._generateHeader(e,E.LocationType.POLYGON,!1),s=It.BitStreamOutput.fromValues();return c.put(s),n.put(s),o.forEach(function(t){return t.put(s)}),s.getData()},e}(lt.AbstractEncoder);r.PolygonEncoder=i});r(Et);Et.PolygonEncoder;var Ot=n(function(t,r){var n,o=e&&e.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.encodeData=function(t,e){var r=t.getCenterPoint(),n=t.getRadius();return null===r?_t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.MISSING_DATA,E.LocationType.CIRCLE,e):n<0?_t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.INVALID_RADIUS,E.LocationType.CIRCLE,e):e<O.BINARY_VERSION_3?_t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.INVALID_VERSION,E.LocationType.CIRCLE,e):_t.LocationReference.fromIdAndBuffer(t.getId(),this._generateBinaryCircleLocation(r,n,e))},e.prototype._generateBinaryCircleLocation=function(t,e,r){var n=this._generateRadius(e),o=this._generateAbsCoord(t),i=this._generateHeader(r,E.LocationType.CIRCLE,!1),a=It.BitStreamOutput.fromValues();return i.put(a),o.put(a),null!=n&&n.put(a),a.getData()},e}(lt.AbstractEncoder);r.CircleEncoder=i});r(Ot);Ot.CircleEncoder;var yt=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.getDataFormatIdentifier=function(){return O.IDENTIFIER},t.prototype.getSupportedVersions=function(){return t._VERSIONS},t.prototype.encodeDataFromRLR=function(e){return this.encodeDataFromRLRAndVersion(e,t._VERSIONS[t._VERSIONS.length-1])},t.prototype.encodeDataFromRLRAndVersion=function(t,e){var r=t.getLocationType();if(!this._checkVersion(e,r))return _t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.INVALID_VERSION,r,e);var n=null;switch(r){case E.LocationType.GEO_COORDINATES:n=new Rt.GeoCoordEncoder;break;case E.LocationType.LINE_LOCATION:n=new ht.LineEncoder;break;case E.LocationType.POI_WITH_ACCESS_POINT:throw new Error("PoiAccessEncoder not implemented");case E.LocationType.POINT_ALONG_LINE:n=new dt.PointAlongLineEncoder;break;case E.LocationType.CIRCLE:n=new Ot.CircleEncoder;break;case E.LocationType.RECTANGLE:throw new Error("RectangleEncoder not implemented");case E.LocationType.GRID:throw new Error("GridEncoder not implemented");case E.LocationType.POLYGON:n=new Et.PolygonEncoder;break;case E.LocationType.CLOSED_LINE:throw new Error("ClosedLineEncoder not implemented");case E.LocationType.UNKNOWN:default:return _t.LocationReference.fromValues(t.getId(),y.BinaryReturnCode.UNKNOWN_LOCATION_TYPE,r,e)}return n.encodeData(t,e)},t.prototype._checkVersion=function(e,r){for(var n=!1,o=0,i=t._VERSIONS;o<i.length;o++){e===i[o]&&(n=!0)}return O.POINT_LOCATION_TYPES.has(r)&&e<O.POINT_LOCATION_VERSION&&(n=!1),O.AREA_LOCATION_TYPES.has(r)&&e<O.AREA_LOCATION_VERSION&&(n=!1),n},t._VERSIONS=[2,3],t}();e.BinaryEncoder=r});r(yt);yt.BinaryEncoder;var gt=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r={Object:Object,Array:Array,Offsets:H.Offsets,LocationReference:_t.LocationReference,LocationReferencePoint:m.LocationReferencePoint,GeoCoordinates:J.GeoCoordinates,RawInvalidLocationReference:S.RawInvalidLocationReference,RawLineLocationReference:x.RawLineLocationReference,RawPointAlongLineLocationReference:K.RawPointAlongLineLocationReference,RawGeoCoordLocationReference:$.RawGeoCoordLocationReference,RawPolygonLocationReference:rt.RawPolygonLocationReference,RawCircleLocationReference:ot.RawCircleLocationReference},n=function(){function t(){}return t.serialize=function(e){if(!e)return e;switch(e.constructor.name){case"Number":case"Boolean":case"String":return e;case"Object":case"Array":default:var r="Array"===e.constructor.name?[]:{};for(var n in e)e.hasOwnProperty(n)&&(r[n]=t.serialize(e[n]));return{type:e.constructor.name,properties:r}}},t.deserialize=function(e){if(!e)return e;switch(e.constructor.name){case"Number":case"Boolean":case"String":return e;case"Object":case"Array":var n=e.type,o=e.properties,i=new(0,r[n]);for(var a in o)o.hasOwnProperty(a)&&(i[a]=t.deserialize(o[a]));return i;default:throw new Error("Unsupported JavaScript object type: "+e.constructor.name)}},t}();e.Serializer=n});r(gt);gt.Serializer;var At=n(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Buffer=R.Buffer,e.BinaryDecoder=ft.BinaryDecoder,e.BinaryEncoder=yt.BinaryEncoder,e.LocationReference=_t.LocationReference,e.RawLocationReference=L.RawLocationReference,e.Serializer=gt.Serializer}),Lt=r(At),St=At.Buffer,Tt=At.BinaryDecoder,Bt=At.BinaryEncoder,vt=At.LocationReference,Nt=At.RawLocationReference,Ct=At.Serializer;t.default=Lt,t.Buffer=St,t.BinaryDecoder=Tt,t.BinaryEncoder=Bt,t.LocationReference=vt,t.RawLocationReference=Nt,t.Serializer=Ct,Object.defineProperty(t,"__esModule",{value:!0})});
